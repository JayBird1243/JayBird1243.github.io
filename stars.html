<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Starry Sky Deep Dive | Jack Buhr</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="background-container">
        <div id="stars-container"></div>
        <div id="nodes-container"></div>
    </div>

    <header>
        <nav>
            <div class="logo">JB</div>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="resume.html">Resume</a></li>
                <li><a href="design.html">Design</a></li>
            </ul>
            <div id="seed-display" class="seed-display">Seed: </div>
        </nav>
    </header>

    <main id="content-wrapper">
        <section class="content-box">
            <h2>Starry Sky: A Deep Dive</h2>
            <p>This page details the procedural generation of the website's animated background. The entire effect is driven by a single 32-character hexadecimal seed, ensuring that each visitor's experience is unique yet reproducible. The primary technologies used are <strong>HTML</strong>, <strong>CSS</strong>, and <strong>JavaScript</strong>.</p>
        </section>

        <section class="content-box">
            <h3>Seed Generation & PRNG</h3>
            <p>A 32-character hexadecimal seed is generated client-side upon visiting the site. This seed is then used to initialize a Mulberry32, a simple and fast Pseudo-Random Number Generator (PRNG). Every "random" value used in the background generation is derived from this PRNG, making the entire visual deterministic based on the initial seed.</p>
            <pre><code class="language-javascript">
function generateLocalSeed() {
    let seed = '';
    const hexChars = '0123456789abcdef';
    for (let i = 0; i < 32; i++) {
        seed += hexChars[Math.floor(Math.random() * 16)];
    }
    return seed;
}

function mulberry32(hexSeed) {
    let seed = parseInt(hexSeed.substring(0, 8), 16);
    return function() {
        let t = seed += 0x6D2B79F5;
        t = Math.imul(t ^ t >>> 15, t | 1);
        t ^= t + Math.imul(t ^ t >>> 7, t | 61);
        return ((t ^ t >>> 14) >>> 0) / 4294967296;
    };
}
            </code></pre>
        </section>

        <section class="content-box">
            <h3>Field of Stars</h3>
            <p>The stars' sizes and total count are determined using a normal (Gaussian) distribution, which creates a more natural appearance than uniform randomness. The Box-Muller transform is used to generate normally distributed values from our uniform PRNG. The number of stars also scales proportionally to the total height of the page, maintaining a consistent density.</p>
            <pre><code class="language-javascript">
function normalRandom(prng, mean, stdDev) {
    let u = 0, v = 0;
    while (u === 0) u = prng();
    while (v === 0) v = prng();
    const z = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
    return z * stdDev + mean;
}

function getStarCount(prng, pageHeightRatio) {
    const meanPerScreen = 750;
    const stdDevPerScreen = 200;
    const mean = meanPerScreen * pageHeightRatio;
    const stdDev = stdDevPerScreen * Math.sqrt(pageHeightRatio); 
    const count = normalRandom(prng, mean, stdDev);
    return Math.max(50 * pageHeightRatio, Math.floor(count));
}

function getStarSize(prng) {
    const size = normalRandom(prng, 2, 1.426);
    return Math.max(1, Math.min(10, Math.floor(size)));
}
            </code></pre>
        </section>

        <section class="content-box">
            <h3>Nebula Gradient</h3>
            <p>The soft, colorful "nebula" effect is created by layering several large, transparent radial gradients. The colors are generated based on segments of the seed, with a complex formula to ensure a sophisticated, muted, and dark palette. The number of gradient nodes also scales with page height.</p>
            <pre><code class="language-javascript">
function generateColorPalette(count, prng, hexSeed) {
    const colors = [];
    // ... complex color generation logic ...
    return colors;
}

// In renderVisuals()
const gradients = [];
for (let i = 0; i < numColors; i++) {
    const x = prng() * 100;
    const y = prng() * 100; 
    const color = colors[i];
    gradients.push(`radial-gradient(circle at ${x}% ${y}%, ${color}, transparent 50%)`);
}
nodesContainer.style.backgroundImage = gradients.join(', ');
            </code></pre>
        </section>

    </main>

    <script src="script.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>
